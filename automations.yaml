- id: magicmirror_on_by_motion
  alias: MagicMirror on by motion
  trigger:
    - platform: state
      entity_id: binary_sensor.fibaro_eye_sensor
      to: 'on'
  condition:
  - condition: state
    entity_id: switch.magicmirror_on_off
    state: 'off'
  action:
#  - alias: MagicMirror On
    - service: homeassistant.turn_on
      entity_id: switch.magicmirror_on_off
    - delay:
        seconds: 90
    - service: homeassistant.turn_off
      entity_id: switch.magicmirror_on_off
#############################################
#alias: MagicMirror on by presence by Joachim Axon 7
#trigger:
#  entity_id: device_tracker.8c7967a52ffb
#  platform: state
#  to: 'not_home'
#action:
#  - alias: MagicMirror Off
#  service: homeassistant.turn_off
#  entity_id: switch.magicmirror_on_off
- id: tv-light_on_by_sunset
  alias: tv-light_on_by_sunset
  trigger:
    - platform: sun
      event: sunset
  condition:
  - condition: time
    before: "21:00:00"
  action:
    - service: homeassistant.turn_on
      entity_id: light.tv
- id: change_state_when_arriving_home
  alias: change_state_when_arriving_home
  trigger:
    - platform: state
      entity_id: device_tracker.8c7967a52ffb
      to: 'home'
  condition:
  - condition: state
    entity_id: input_select.state
    state: 'Away'
  action:
    - service: input_select.option
      data: 
        entity_id: input_select.state
        option: 'Home'
- id: change_state_from_sleeping
  alias: change_state_from_sleeping
  trigger:
    - platform: state
      entity_id: binary_sensor.fibaro_eye_sensor
      to: 'on'
  condition:
  - condition: state
    entity_id: input_select.state
    state: 'Sleeping'
  action:
    - service: input_select.option
      data: 
        entity_id: input_select.state
        option: 'Home'
- id: turn_on_rooflamp_when_when_precens_detected_and_dark
  alias: turn_on_rooflamp_when_when_precens_detected_and_dark
  trigger:
    - platform: numeric_state
      entity_id: sensor.fibaro_eye_luminance
      below: 5
  condition:
  - condition: state
    entity_id: device_tracker.8c7967a52ffb
    state: 'Home'
  action:
    service: homeassistant.turn_on
#      data: 
    entity_id: light.spotlight 
#        option: 'Home'

- id: automatic_theme_change
  alias: Automatic Theme Change
  trigger:
    - platform: state
      entity_id: sun.sun
      to: above_horizon
    - platform: state
      entity_id: sun.sun
      to: below_horizon
  action:
    - service_template: frontend.set_theme
      data_template:
        name: >
          {% if states.sun.sun.state == "above_horizon" %}
            default
          {% else %}
            darkred # <-- change to your dark theme name.
          {% endif %}

- id: hue_iris_goodnight_30_minutes
  alias: hue_iris_goodnight_30_minutes
  trigger:
    - platform: state
      entity_id: input_select.state
      to: 'Sleeping'
  action:
     service: homeassistant.turn_off
     data: 
       entity_id: light.hue_iris 
       transition: 1800
#- id: restart_hass_2_minutes_to_midnight
#  alias: restart_hass_2_minutes_to_midnight
#  trigger:
#    - platform: time
#      at: "23:58:00"
#  action:
#    service: shell_command.restart_hass
- id: sofo_shutdown
  alias: sofo_shutdown
  trigger:
    - platform: state
      entity_id: input_select.state
      to: 'Sleeping'
  action:
     service: homeassistant.turn_off
     data: 
       entity_id:
         - light.tv
         - media_player.lg_55ea970w
         - light.spotlight
         - light.taklampa
